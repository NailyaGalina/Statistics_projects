### "Симуляция Монте-Карло"

**Описание задачи:**  
К нам пришли наши коллеги из ML-отдела и рассказали, что планируют выкатывать новый алгоритм, рекомендующий нашим пользователям интересные посты. Предполагается, что увеличение числа просмотров приведёт и к увеличению лайков на пользователя. Встаёт вопрос: сможем ли мы обнаружить различия в среднем количестве лайков на пользователя?  
Чтобы ответить на этот вопрос, проведём симуляцию Монте-Карло:  
- Разобьем пользователей на две группы в соотношении 50/50;  
- Количество симуляций зададим не меньше 20000;   
- Лайки будем сравнивать t-test с поправкой Уэлча на неравные дисперсии (equal_var=False). Уровень значимости поставим 0.05.

**Цель:**  
Подобрать размер выборки так, чтобы мощность А/В теста была не менее 80%.  

**Стек:**
Python (pandahouse, pandas, numpy, seaborn, scipy, tqdm), ClickHouse.

**Этапы работы**:  
Проведем симуляцию при следующих условиях:  
1. алгоритм добавляет пользователям 1-2 просмотра; вероятность того, что он сработает, составляет 90%; если у пользователя меньше 50 просмотров, то алгоритм не сработает; длительность эксперимента 1 неделя;   
2. теперь применим число просмотров от 30 и выше, остальное оставим без изменений;  
3. теперь установим длительность эксперимента длиной в 2 недели, сами распределения, на основе которых мы симулируем данные, менять не будем;  
4. уберем пользователей с просмотрами меньше 30.

**Результат:**  
Несмотря на все усилия, добраться до уровня мощности в 80% так и не получилось.  
Что в таком случае можно предпринять?  
•	Отказаться от идеи эксперимента вообще. Раз у нас не хватает ресурсов для детекции такого изменения, то и смысла особо действовать нет.  
•	Всё равно запустить эксперимент и надеяться на лучшее. Платой за это решение будет меньшая уверенность в полученных результатах.  
•	Дорабатывать алгоритм, чтобы его эффект либо распространялся на большее число пользователей, либо чтобы он был больше.  
•	Поменять уровень значимости на более высокий. Платой за это будет большая вероятность ложноположительного результата.  
•	Поменять статистический тест на другой; может, t-test просто имеет тут недостаточно мощности. Возможно, также поможет линеаризация или какой-нибудь вариант бакетизации.


Ознакомиться с файлом решения можно здесь: **[Симуляция Монте-Карло]( https://github.com/NailyaGalina/Statistic_simulation_Monte_Carlo-/blob/main/Simulation_Monte_Carlo.ipynb)**

<br>
<br>

*Проект разработан мной на основе материалов, автор которых - [karpov.courses](https://karpov.courses)
